
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/1_failure_operator_example.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_gallery_examples_1_failure_operator_example.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_1_failure_operator_example.py:


.. _failure_operator_example:

Composite failure analysis
--------------------------

Analyse a composite structure by a combined failure criterion.

The failure operator of DPF Composites computes the minimum and maximum failure values
and failure modes of a combined failure criterion. A combined failure criterion is a selection of
failure criteria such as Puck, Tsai-Wu or Face Sheet Wrinkling. Refer to
:ref:`the Failure Criteria API Reference <failure_criteria>` to get the full list of
failure criteria.

The :class:`Combined Failure Criterion
<.failure_criteria.CombinedFailureCriterion>`
allows you to assess different type of materials and failure modes at once.
The scoping enables to evaluate of the min and max failure per element,
or to select a list of materials or plies.

.. GENERATED FROM PYTHON SOURCE LINES 22-27

Script
~~~~~~

Load ansys libraries, connect to the DPF server, and retrieve the example
files.

.. GENERATED FROM PYTHON SOURCE LINES 27-40

.. code-block:: default


    from ansys.dpf.composites.composite_model import CompositeModel, CompositeScope
    from ansys.dpf.composites.constants import FailureOutput
    from ansys.dpf.composites.example_helper import get_continuous_fiber_example_files
    from ansys.dpf.composites.failure_criteria import (
        CombinedFailureCriterion,
        CoreFailureCriterion,
        MaxStrainCriterion,
        MaxStressCriterion,
        VonMisesCriterion,
    )
    from ansys.dpf.composites.server_helpers import connect_to_or_start_server








.. GENERATED FROM PYTHON SOURCE LINES 41-43

Start a server and get the examples files.
This will copy the example files into the current working directory.

.. GENERATED FROM PYTHON SOURCE LINES 43-46

.. code-block:: default

    server = connect_to_or_start_server()
    composite_files_on_server = get_continuous_fiber_example_files(server, "shell")








.. GENERATED FROM PYTHON SOURCE LINES 47-48

Configure the combined failure criterion

.. GENERATED FROM PYTHON SOURCE LINES 48-59

.. code-block:: default


    combined_fc = CombinedFailureCriterion(
        name="failure of all materials",
        failure_criteria=[
            MaxStrainCriterion(),
            MaxStressCriterion(),
            CoreFailureCriterion(),
            VonMisesCriterion(vme=True, vms=False),
        ],
    )








.. GENERATED FROM PYTHON SOURCE LINES 60-61

Set up the composite model

.. GENERATED FROM PYTHON SOURCE LINES 61-63

.. code-block:: default

    composite_model = CompositeModel(composite_files_on_server, server)








.. GENERATED FROM PYTHON SOURCE LINES 64-65

Failure evaluation for the entire model

.. GENERATED FROM PYTHON SOURCE LINES 65-71

.. code-block:: default

    output_all_elements = composite_model.evaluate_failure_criteria(
        combined_criterion=combined_fc,
    )
    irf_field = output_all_elements.get_field({"failure_label": FailureOutput.FAILURE_VALUE})
    irf_field.plot()




.. image-sg:: /examples/gallery_examples/images/sphx_glr_1_failure_operator_example_001.png
   :alt: 1 failure operator example
   :srcset: /examples/gallery_examples/images/sphx_glr_1_failure_operator_example_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 72-73

Scope failure evaluation to a certain element scope

.. GENERATED FROM PYTHON SOURCE LINES 73-80

.. code-block:: default

    output_two_elements = composite_model.evaluate_failure_criteria(
        combined_criterion=combined_fc,
        composite_scope=CompositeScope(elements=[1, 3]),
    )
    irf_field = output_two_elements.get_field({"failure_label": FailureOutput.FAILURE_VALUE})
    irf_field.plot()




.. image-sg:: /examples/gallery_examples/images/sphx_glr_1_failure_operator_example_002.png
   :alt: 1 failure operator example
   :srcset: /examples/gallery_examples/images/sphx_glr_1_failure_operator_example_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 81-82

Scope by plies

.. GENERATED FROM PYTHON SOURCE LINES 82-88

.. code-block:: default

    output_woven_plies = composite_model.evaluate_failure_criteria(
        combined_criterion=combined_fc,
        composite_scope=CompositeScope(plies=["P1L1__ud_patch ns1"]),
    )
    irf_field = output_woven_plies.get_field({"failure_label": FailureOutput.FAILURE_VALUE})
    irf_field.plot()



.. image-sg:: /examples/gallery_examples/images/sphx_glr_1_failure_operator_example_003.png
   :alt: 1 failure operator example
   :srcset: /examples/gallery_examples/images/sphx_glr_1_failure_operator_example_003.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  4.836 seconds)


.. _sphx_glr_download_examples_gallery_examples_1_failure_operator_example.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 1_failure_operator_example.py <1_failure_operator_example.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 1_failure_operator_example.ipynb <1_failure_operator_example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
