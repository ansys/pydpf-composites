
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/get_layup_properties_example.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_gallery_examples_get_layup_properties_example.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_get_layup_properties_example.py:


.. _layup_properties_plot:

Get Layup Properties
----------------------------------------------------------

This example shows how to access basic layup properties such as layer
thicknesses, angles and analysis ply names. These properties can be queried
very efficiently. To get the full layup information of an element including results
consider also the sampling point operator
(:ref:`sphx_glr_examples_gallery_examples_sampling_point_example.py`)

.. GENERATED FROM PYTHON SOURCE LINES 15-16

Import dependencies

.. GENERATED FROM PYTHON SOURCE LINES 16-30

.. code-block:: default

    import ansys.dpf.core as dpf
    from matplotlib import pyplot as plt
    import numpy as np

    from ansys.dpf.composites.add_layup_info_to_mesh import (
        add_layup_info_to_mesh,
        get_composites_data_sources,
    )
    from ansys.dpf.composites.example_helper.example_helper import (
        connect_to_or_start_server,
        get_continuous_fiber_example_files,
    )
    from ansys.dpf.composites.layup_info import LayupPropertiesProvider








.. GENERATED FROM PYTHON SOURCE LINES 31-32

Start server and load example files

.. GENERATED FROM PYTHON SOURCE LINES 32-36

.. code-block:: default


    server_context = connect_to_or_start_server()
    composite_files_on_server = get_continuous_fiber_example_files(server_context, "shell")








.. GENERATED FROM PYTHON SOURCE LINES 37-38

Setup Mesh Provider

.. GENERATED FROM PYTHON SOURCE LINES 38-41

.. code-block:: default

    model = dpf.Model(composite_files_on_server.rst)
    mesh_provider = model.metadata.mesh_provider
    mesh = mesh_provider.outputs.mesh()







.. GENERATED FROM PYTHON SOURCE LINES 42-43

Reads the composite definition file and enriches the mesh with the composite layup information.

.. GENERATED FROM PYTHON SOURCE LINES 43-47

.. code-block:: default

    composites_data_sources = get_composites_data_sources(composite_files_on_server)
    layup_operators = add_layup_info_to_mesh(mesh=mesh, data_sources=composites_data_sources)









.. GENERATED FROM PYTHON SOURCE LINES 48-49

Get layup properties for all the elements and show the first one as an example

.. GENERATED FROM PYTHON SOURCE LINES 49-60

.. code-block:: default

    properties_provider = LayupPropertiesProvider(
        layup_provider=layup_operators.layup_provider, mesh=mesh
    )
    element_id = 1
    thicknesses = properties_provider.get_layer_thicknesses(element_id)
    offset = properties_provider.get_element_laminate_offset(element_id)
    angles = properties_provider.get_layer_angles(element_id)
    shear_angles = properties_provider.get_layer_shear_angles(element_id)
    analysis_plies = properties_provider.get_analysis_plies(element_id)









.. GENERATED FROM PYTHON SOURCE LINES 61-62

Plot of layup properties

.. GENERATED FROM PYTHON SOURCE LINES 62-80

.. code-block:: default

    y_coordinates = offset + np.cumsum(thicknesses)
    y_centers = y_coordinates - thicknesses / 2

    fig, ax1 = f, ax = plt.subplots(figsize=(6, 10))

    for y_coordinate in y_coordinates:
        ax1.axhline(y=y_coordinate, color="k")

    for angle, shear_angle, y_coordinate, analysis_ply in zip(
        angles, shear_angles, y_centers, analysis_plies
    ):
        ax1.annotate(
            f"Angle={angle}°, Shear Angle={shear_angle}°, {analysis_ply}",
            xy=(0.1, y_coordinate),
            xytext=(0.1, y_coordinate),
        )

    fig.show()



.. image-sg:: /examples/gallery_examples/images/sphx_glr_get_layup_properties_example_001.png
   :alt: get layup properties example
   :srcset: /examples/gallery_examples/images/sphx_glr_get_layup_properties_example_001.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.680 seconds)


.. _sphx_glr_download_examples_gallery_examples_get_layup_properties_example.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: get_layup_properties_example.py <get_layup_properties_example.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: get_layup_properties_example.ipynb <get_layup_properties_example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
