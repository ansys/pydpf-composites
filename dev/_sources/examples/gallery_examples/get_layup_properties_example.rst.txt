
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/get_layup_properties_example.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_gallery_examples_get_layup_properties_example.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_get_layup_properties_example.py:


.. _layup_properties_plot:

Get Layup Properties
----------------------------------------------------------

This example shows how to access basic layup properties such as layer
thicknesses, angles and analysis ply names. These properties can be queried
very efficiently. To get the full layup information of an element including results
consider also the sampling point operator
(:ref:`sphx_glr_examples_gallery_examples_sampling_point_example.py`)

.. GENERATED FROM PYTHON SOURCE LINES 15-16

Import dependencies

.. GENERATED FROM PYTHON SOURCE LINES 16-23

.. code-block:: default

    from matplotlib import pyplot as plt
    import numpy as np

    from ansys.dpf.composites.composite_model import CompositeModel, LayerProperty
    from ansys.dpf.composites.connect_to_or_start_server import connect_to_or_start_server
    from ansys.dpf.composites.example_helper.example_helper import get_continuous_fiber_example_files








.. GENERATED FROM PYTHON SOURCE LINES 24-25

Start server and load example files

.. GENERATED FROM PYTHON SOURCE LINES 25-29

.. code-block:: default


    server_context = connect_to_or_start_server()
    composite_files_on_server = get_continuous_fiber_example_files(server_context, "shell")








.. GENERATED FROM PYTHON SOURCE LINES 30-31

Setup composite model

.. GENERATED FROM PYTHON SOURCE LINES 31-33

.. code-block:: default

    composite_model = CompositeModel(composite_files_on_server, server_context.server)








.. GENERATED FROM PYTHON SOURCE LINES 34-35

Get layup properties for all the elements and show the first one as an example

.. GENERATED FROM PYTHON SOURCE LINES 35-44

.. code-block:: default


    element_id = 1
    thicknesses = composite_model.get_property_for_all_layers(LayerProperty.thicknesses, element_id)
    angles = composite_model.get_property_for_all_layers(LayerProperty.angles, element_id)
    shear_angles = composite_model.get_property_for_all_layers(LayerProperty.shear_angles, element_id)
    offset = composite_model.get_element_laminate_offset(element_id)
    analysis_plies = composite_model.get_analysis_plies(element_id)









.. GENERATED FROM PYTHON SOURCE LINES 45-46

Plot of layup properties

.. GENERATED FROM PYTHON SOURCE LINES 46-64

.. code-block:: default

    y_coordinates = offset + np.cumsum(thicknesses)
    y_centers = y_coordinates - thicknesses / 2

    fig, ax1 = f, ax = plt.subplots(figsize=(6, 10))

    for y_coordinate in y_coordinates:
        ax1.axhline(y=y_coordinate, color="k")

    for angle, shear_angle, y_coordinate, analysis_ply in zip(
        angles, shear_angles, y_centers, analysis_plies
    ):
        ax1.annotate(
            f"Angle={angle}°, Shear Angle={shear_angle}°, {analysis_ply}",
            xy=(0.1, y_coordinate),
            xytext=(0.1, y_coordinate),
        )

    fig.show()



.. image-sg:: /examples/gallery_examples/images/sphx_glr_get_layup_properties_example_001.png
   :alt: get layup properties example
   :srcset: /examples/gallery_examples/images/sphx_glr_get_layup_properties_example_001.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.799 seconds)


.. _sphx_glr_download_examples_gallery_examples_get_layup_properties_example.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: get_layup_properties_example.py <get_layup_properties_example.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: get_layup_properties_example.ipynb <get_layup_properties_example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
