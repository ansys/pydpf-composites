
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/failure_operator_example.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_gallery_examples_failure_operator_example.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_failure_operator_example.py:


.. _failure_operator_example:

Composite failure operator
--------------------------

This operator computes the minimum and maximum failure values and failure modes
of a combined failure criterion. A combined failure criterion is a selection of
failure criteria such as Puck, Tsai-Wu, Face Sheet Wrinkling...

The combined failure criterion allows you to assess different type of materials
and failure modes at once. The scoping enables to evaluate of the min and max
failure per element, or to select a list of materials or plies.

.. GENERATED FROM PYTHON SOURCE LINES 17-18

Load ansys libraries

.. GENERATED FROM PYTHON SOURCE LINES 18-34

.. code-block:: default


    from ansys.dpf.composites.composite_model import CompositeModel, CompositeScope
    from ansys.dpf.composites.connect_to_or_start_server import connect_to_or_start_server
    from ansys.dpf.composites.enums import FailureOutput
    from ansys.dpf.composites.example_helper.example_helper import get_continuous_fiber_example_files
    from ansys.dpf.composites.failure_criteria import (
        CombinedFailureCriterion,
        CoreFailureCriterion,
        MaxStrainCriterion,
        MaxStressCriterion,
        VonMisesCriterion,
    )

    server = connect_to_or_start_server()
    composite_files_on_server = get_continuous_fiber_example_files(server, "shell")








.. GENERATED FROM PYTHON SOURCE LINES 35-36

Definition of the combined failure criterion

.. GENERATED FROM PYTHON SOURCE LINES 36-48

.. code-block:: default

    def get_combined_failure_criterion() -> CombinedFailureCriterion:
        max_strain = MaxStrainCriterion()
        max_stress = MaxStressCriterion()
        core_failure = CoreFailureCriterion()
        von_mises_strain_only = VonMisesCriterion(vme=True, vms=False)

        return CombinedFailureCriterion(
            name="failure of all materials",
            failure_criteria=[max_strain, max_stress, core_failure, von_mises_strain_only],
        )









.. GENERATED FROM PYTHON SOURCE LINES 49-50

Setup composite model

.. GENERATED FROM PYTHON SOURCE LINES 50-55

.. code-block:: default

    composite_model = CompositeModel(composite_files_on_server, server)
    output_all_elements = composite_model.evaluate_failure_criteria(
        combined_criteria=get_combined_failure_criterion(),
    )








.. GENERATED FROM PYTHON SOURCE LINES 56-58

Plot the max IRF per element


.. GENERATED FROM PYTHON SOURCE LINES 58-62

.. code-block:: default


    irf_field = output_all_elements.get_field({"failure_label": FailureOutput.failure_value.value})
    irf_field.plot()




.. image-sg:: /examples/gallery_examples/images/sphx_glr_failure_operator_example_001.png
   :alt: failure operator example
   :srcset: /examples/gallery_examples/images/sphx_glr_failure_operator_example_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 63-64

Scope failure evaluation to certain element scope

.. GENERATED FROM PYTHON SOURCE LINES 64-71

.. code-block:: default

    output_two_elements = composite_model.evaluate_failure_criteria(
        combined_criteria=get_combined_failure_criterion(),
        composite_scope=CompositeScope(elements=[1, 3]),
    )
    irf_field = output_two_elements.get_field({"failure_label": FailureOutput.failure_value.value})
    irf_field.plot()




.. image-sg:: /examples/gallery_examples/images/sphx_glr_failure_operator_example_002.png
   :alt: failure operator example
   :srcset: /examples/gallery_examples/images/sphx_glr_failure_operator_example_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 72-73

Scope by plies

.. GENERATED FROM PYTHON SOURCE LINES 73-79

.. code-block:: default

    output_woven_plies = composite_model.evaluate_failure_criteria(
        combined_criteria=get_combined_failure_criterion(),
        composite_scope=CompositeScope(plies=["P1L1__ud_patch ns1"]),
    )
    irf_field = output_woven_plies.get_field({"failure_label": FailureOutput.failure_value.value})
    irf_field.plot()



.. image-sg:: /examples/gallery_examples/images/sphx_glr_failure_operator_example_003.png
   :alt: failure operator example
   :srcset: /examples/gallery_examples/images/sphx_glr_failure_operator_example_003.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  1.329 seconds)


.. _sphx_glr_download_examples_gallery_examples_failure_operator_example.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: failure_operator_example.py <failure_operator_example.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: failure_operator_example.ipynb <failure_operator_example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
